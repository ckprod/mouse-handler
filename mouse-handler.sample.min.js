!function(){"use strict"
function t(){}function e(t,e,o,n){this.dragElement=t,this.dragArea=e,this.statusElement=o
var i={}
for(var s in this.options)i[s]="undefined"===n[s]?this.options[s]:n[s]
this.options=i,this._init()}function o(t,o,n,s){var r=new e(t,o,n,s||{})
i(t,"mousedown",function(t){r._mouseDown(t)})}function n(t){var e=t.getBoundingClientRect(),o=document.body,n=document.documentElement,i=window.pageYOffset||n.scrollTop||o.scrollTop,s=window.pageXOffset||n.scrollLeft||o.scrollLeft,r=n.clientTop||o.clientTop||0,a=n.clientLeft||o.clientLeft||0,u=e.top+i-r,l=e.left+s-a
return{top:Math.round(u),left:Math.round(l)}}function i(t,e,o){t.attachEvent?(t["e"+e+o]=o,t[e+o]=function(){t["e"+e+o](window.event)},t.attachEvent("on"+e,t[e+o])):t.addEventListener(e,o,!1)}function s(t,e,o){t.detachEvent?(t.detachEvent("on"+e,t[e+o]),t[e+o]=null):t.removeEventListener(e,o,!1)}t.prototype=function(){function e(t){return t||window.event}function o(t){return t.which||t.button}function n(t){var e=t.pageX
if(void 0===e){var o=document.body,n=document.documentElement
e=t.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0)}return e}function r(t){var e=t.pageY
if(void 0===e){var o=document.body,n=document.documentElement
e=t.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)}return e}function a(t){if(t=e(t),this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t,!t.which){var n={}
for(var s in t)n[s]=t[s]
this._mouseDownEvent=n}if(1!==o(t))return!0
if(0==this.options.distance){if(this._mouseStarted=this._mousePrepareDrag(t)!==!1,!this._mouseStarted)return t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!0}else this._mousePrepareClick(t)
var r=this
return this._mouseMoveDelegate=function(t){return r._mouseMove(t)},this._mouseUpDelegate=function(t){return r._mouseUp(t)},i(document.body,"mousemove",this._mouseMoveDelegate),i(document.body,"mouseup",this._mouseUpDelegate),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!0}function u(t){return t=e(t),o(t)?this._mouseStarted?(this._mouseDrag(t),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!1):(this._mouseDistanceMet(t,this._mouseDownEvent)&&(this._mouseStarted=this._mousePrepareDrag(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!this.mouseStarted):this._mouseUp(t)}function l(t){return t=e(t),s(document.body,"mousemove",this._mouseMoveDelegate),s(document.body,"mouseup",this._mouseUpDelegate),this._mouseStarted?(this._mouseStarted=!1,this._mouseStopDrag(t)):this._mouseExecuteClick(t),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!1}function c(t,e){var o=Math.abs(n(e)-n(t)),i=Math.abs(r(e)-r(t))
return Math.sqrt(o*o+i*i)>=this.options.distance}function p(){}function m(){}function f(){}function h(){}function d(){}return{constructor:t,options:{distance:0},_mouseDown:a,_mouseMove:u,_mouseUp:l,_mouseDistanceMet:c,_mousePrepareClick:p,_mousePrepareDrag:m,_mouseDrag:f,_mouseExecuteClick:h,_mouseStopDrag:d}}(),function(){function o(t){var e=t.pageX
if(void 0===e){var o=document.body,n=document.documentElement
e=t.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0)}return e}function i(t){var e=t.pageY
if(void 0===e){var o=document.body,n=document.documentElement
e=t.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)}return e}function s(t){for(var e="Status: ",o=1;o<arguments.length;o++)e+="<br>- "+arguments[o]
t.innerHTML=e}function r(t,e){if(window.getComputedStyle)return window.getComputedStyle(t,"").getPropertyValue(e)
var o=/(\-([a-z]){1})/g
return"float"==e&&(e="styleFloat"),o.test(e)&&(e=e.replace(o,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]}function a(t){return void 0===t||""==t||null==t?0:parseInt(t)}e.prototype=new t,e.prototype.constructor=e,e.prototype._init=function(){var t=n(this.dragArea),e=n(this.dragElement),o=document.getElementById("canvas")
if(o.getContext){var i=o.getContext("2d")
i.beginPath(),i.lineWidth="1",i.strokeStyle="#999999",i.rect(e.left-t.left,e.top-t.top,this.dragElement.offsetWidth,this.dragElement.offsetHeight),i.stroke()}},e.prototype._mousePrepareClick=function(t){this.dragElement.style.backgroundColor="white"
var e=n(this.dragArea),r=o(t),a=i(t),u=document.getElementById("canvas")
if(u.getContext){var l=u.getContext("2d")
l.beginPath(),l.strokeStyle="blue",l.arc(r-e.left,a-e.top,this.options.distance,0,2*Math.PI,!0),l.stroke()}s(this.statusElement,"action: _mousePrepareClick")},e.prototype._mousePrepareDrag=function(t){var e=n(this.dragArea),r=n(this.dragElement),a=o(t),u=i(t)
this.xMin=e.left+a-r.left,this.yMin=e.top+u-r.top,this.xMax=e.left+a-r.left+this.dragArea.offsetWidth-this.dragElement.offsetWidth,this.yMax=e.top+u-r.top+this.dragArea.offsetHeight-this.dragElement.offsetHeight,s(this.statusElement,"action: _mousePrepareDrag","xMin: "+this.xMin+" xMax: "+this.xMax,"yMin: "+this.yMin+" yMax: "+this.yMax,"pageX: "+a+" pageY: "+u)},e.prototype._mouseDrag=function(t){var e=o(t),u=i(t)
if(e<this.xMin)this.dragElement.style.left="0px"
else if(this.xMax<e)this.dragElement.style.left=this.dragArea.offsetWidth-this.dragElement.offsetWidth+"px"
else{var l=e-o(this._mouseDownEvent),c=a(r(this.dragElement,"left"))+l
this.dragElement.style.left=c+"px"}if(u<this.yMin)this.dragElement.style.top="0px"
else if(this.yMax<u)this.dragElement.style.top=this.dragArea.offsetHeight-this.dragElement.offsetHeight+"px"
else{var p=u-i(this._mouseDownEvent),m=a(r(this.dragElement,"top"))+p
this.dragElement.style.top=m+"px"}if(t.which)this._mouseDownEvent=t
else{var f={}
for(var h in t)f[h]=t[h]
this._mouseDownEvent=f}var d=n(this.dragArea),g=document.getElementById("canvas")
if(g.getContext){var v=g.getContext("2d")
v.fillRect(e-d.left,u-d.top,1,1)}s(this.statusElement,"action: _mouseDrag","xMin: "+this.xMin+" xMax: "+this.xMax,"yMin: "+this.yMin+" yMax: "+this.yMax,"pageX: "+e+" pageY: "+u)},e.prototype._mouseExecuteClick=function(){var t=255*Math.random()|0,e=t<<16|t<<8|t,o="#"+e.toString(16)
this.dragElement.style.backgroundColor=o,s(this.statusElement,"action: _mouseExecuteClick")},e.prototype._mouseStopDrag=function(){s(this.statusElement,"action: _mouseStopDrag")}}(),"undefined"!=typeof module&&module.exports?module.exports=o:window.SampleDragClick=o}()